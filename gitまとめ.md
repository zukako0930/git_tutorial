# gitまとめ
## 目次
- gitって何？
- gitの基本
- Gitで使うコマンド~pull,add,commit,pushして共同作業~
- ~branchを切って安全に作業を~ 
- 高品さんによるSourceTree講座

## gitって何?
分散型バージョン管理システム．
複数人で開発をするときにはバージョン管理が必須．
- 変更してはいけないところを変更してしまった!
- 変更した結果動かなくなってしまった!
- 最新版がどれかわからなくなった!
- 最新版を消してしまった!
- 他の人が作ってくれたファイルを上書きしてしまった!
- など

複数人で作業するときには気をつけないと取り返しのつかない失敗をしてしまうことがある．作業するたびにファイルを保存してしまうと無駄なファイルがたくさんできちゃう．うざい．

もっと簡潔にファイルの管理をしたいなぁ....

`git 様` の出番

インストールすると使えるようになります．
Bashなら
```
$ apt-get install git 
```
で入る？
### gitでできること
> Gitでは、ファイルの状態を好きなときに更新履歴として保存しておくことができます。そのため、一度編集したファイルを過去の状態に戻したり、編集箇所の差分を表示したりすることができます。
> また、古いファイルを元に編集したファイルで、他人の編集した最新ファイルを上書きしようとすると、サーバにアップロードした時に警告が出ます。そのため、知らず知らずのうちに他人の編集内容を上書きしてしまうといった失敗は起こりません。
(引用元 : 猿でもわかるgit)
---
## gitの基本
Gitではファイルやディレクトリの状態を保存する場所を**リポジトリ**と呼ぶ．
そのリポジトリの管理下に置くことで変更履歴を保存することができる．

### リポジトリ
リポジトリには**リモートリポジトリ**と**ローカルリポジトリ**がある．
- リモートリポジトリ
	複数人で共有してファイルなどを共有
- ローカルリポジトリ
	作業する各人のPC上のディレクトリでリモートリポジトリと紐づいている
    
リモートとローカルとに分けることで普段の作業は自分のPC上で行い，昨日開発が終わった段階でリモートにアップロードして共有する，という流れで開発ができる．

## gitで使うコマンド
いざ，共同開発を始めよう!
えっとまずどうすればいいか...
ローカルリポジトリを作成してリモートと紐づける．
- 基本 : git clone 
- git init + git pull

### git clone
クローンしたローカルリポジトリは変更履歴も複製されているので、
元々のリポジトリと全く同じように履歴の参照やコミットをすることが
できます。

`git clone`は`git init`と`git pull`の両方やってくれるので基本は`git clone`で良いかと．

```
$ cd <作業ディレクトリ>
$ git clone <リポジトリのアドレス> (<ディレクトリ名>)
```
上のコマンドで作業ディレクトリ配下にリモートリポジトリのコピー(ローカルリポジトリ)ができる．
名前を指定すると，その名前のディレクトリになる．

これで一応作業の準備はできた!!
共同作業の時には他にも気をつけるところはあるけど，とりあえず流れだけを確認．

作業を始める前に，自分のローカルリポジトリを最新版に更新しておかないといけない．
あとで出てくるけど，競合っていう問題が発生する原因になるので．

なので，**リモートリポジトリの内容を取り込む作業**が必要．それが`git pull`

### git pull
リモートリポジトリの内容でローカルリポジトリを更新する．
基本的には作業前にリモートリポジトリの内容を`pull`する．
```
$ git pull origin master

* branch            master     -> FETCH_HEAD
Updating b3ca6aa..ca605aa
Fast-forward
 README.md | 3 +++
 1 file changed, 3 insertions(+) #変更内容が出力される．
```
上のコマンドでリモートリポジトリの`masterブランチ`の内容が反映される．
`origin`がリモートリポジトリを表している．
`リモートリポジトリのmasterブランチをpullしますよ`という指示．

今度こそ作業の準備ができたので機能開発に移れる．


~ローカルで作業しました~


作業を完了したらそれをリモートに反映させたい．
反映させる手順としては`add`して`commit`して`push`する．
### git add 
意味的にはファイルをgitの管理の対象に入れますよ〜っていう宣言みたいなもの．
`ステージする`っていう言い方もする．

```
$ git add <ファイル名> 
```
で，特定のファイルだけを`add`できる．
でも，基本的には
```
$ git add . 
```
ってすると今のブランチ上の作業分が全てステージされるので楽．
ステージ後に，`git commit`ができるようになる．

### git commit 
ステージされたファイルをローカルリポジトリに登録する．

```
$ git commit -m '〇〇を変更'
```
`-m 'コメント'`をつけるとコメントも同時に登録できる．
逆に，つけないと画面切り替わってコメントつけるように要求される．

コミットしたのでようやくpushできるぞ
### git push
ローカルリポジトリにcommitされた変更をリモートリポジトリに反映する．
```
$ git push origin <現在作業しているブランチ名>
```
ブランチ名には現在作業しているブランチ名を入れる．
こうすることでリモートリポジトリ上にプルリクエストを作ることができる．



プッシュが拒否されないんだけど?→競合してるだけ？

新しいファイルを追加して実験
master ファイルA
同じブランチでの変更をしてみる
branch1 Aくんローカル
branch1 Bくんローカル
Aくんpush
Bくんpush 
エラー出るはず？